[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nSession = Package.session.Session;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nAccounts = Package['accounts-base'].Accounts;\nVK = Package['mrt:accounts-vk'].VK;\nGoogleMaps = Package['dburles:google-maps'].GoogleMaps;\nGeolocation = Package['mdg:geolocation'].Geolocation;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nmeteorInstall = Package.modules.meteorInstall;\nBuffer = Package.modules.Buffer;\nprocess = Package.modules.process;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nmeteorBabelHelpers = Package['babel-runtime'].meteorBabelHelpers;\nPromise = Package.promise.Promise;\nServiceConfiguration = Package['service-configuration'].ServiceConfiguration;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"template.header.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/template.header.js                                                                               //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\n                                                                                                           // 1\nTemplate.__checkName(\"header\");                                                                            // 2\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {                                         // 3\n  var view = this;                                                                                         // 4\n  return HTML.DIV({                                                                                        // 5\n    \"class\": \"header\"                                                                                      // 6\n  }, \"\\n    \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"loginButtons\"))), HTML.Raw('\\n    <button class=\"social\">&#9776;Social</button>\\n    <button>Map</button>\\n    <button>Chat</button>\\n    '), Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"social\"));                                                          // 8\n  }, function() {                                                                                          // 9\n    return [ \"\\n    \", HTML.P(\"\\n      \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"loginButtons\"))), \"\\n      \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"rooms\"))), \"\\n      \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"users\"))), \"\\n    \"), \"\\n    \" ];\n  }), \"\\n  \");                                                                                             // 11\n}));                                                                                                       // 12\n                                                                                                           // 13\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.map.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/template.map.js                                                                                  //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\n                                                                                                           // 1\nTemplate.__checkName(\"map\");                                                                               // 2\nTemplate[\"map\"] = new Template(\"Template.map\", (function() {                                               // 3\n  var view = this;                                                                                         // 4\n  return HTML.DIV({                                                                                        // 5\n    \"class\": \"map-container\"                                                                               // 6\n  }, \"\\n    \", Blaze.Unless(function() {                                                                   // 7\n    return Spacebars.call(view.lookup(\"geolocationError\"));                                                // 8\n  }, function() {                                                                                          // 9\n    return [ \"\\n      \", Blaze._TemplateWith(function() {                                                  // 10\n      return {                                                                                             // 11\n        name: Spacebars.call(\"map\"),                                                                       // 12\n        options: Spacebars.call(view.lookup(\"mapOptions\"))                                                 // 13\n      };                                                                                                   // 14\n    }, function() {                                                                                        // 15\n      return Spacebars.include(view.lookupTemplate(\"googleMap\"));                                          // 16\n    }), \"\\n      \" ];                                                                                      // 17\n  }, function() {                                                                                          // 18\n    return [ \"\\n      Geolocation faild: \", Blaze.View(\"lookup:geolocationError\", function() {             // 19\n      return Spacebars.mustache(view.lookup(\"geolocationError\"));                                          // 20\n    }), \"\\n      \" ];                                                                                      // 21\n  }), \"\\n  \");                                                                                             // 22\n}));                                                                                                       // 23\n                                                                                                           // 24\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.messages.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/template.messages.js                                                                             //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\n                                                                                                           // 1\nTemplate.__checkName(\"messagesBlock\");                                                                     // 2\nTemplate[\"messagesBlock\"] = new Template(\"Template.messagesBlock\", (function() {                           // 3\n  var view = this;                                                                                         // 4\n  return [ HTML.DIV({                                                                                      // 5\n    \"class\": \"messagesBlock\"                                                                               // 6\n  }, \"\\n    \", HTML.UL(\"\\n\\n      \", Blaze.Each(function() {                                               // 7\n    return Spacebars.call(view.lookup(\"messages\"));                                                        // 8\n  }, function() {                                                                                          // 9\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"message\")), \"\\n      \" ];                // 10\n  }), \"\\n    \"), \"\\n  \"), HTML.Raw('\\n\\n  <form class=\"new-message\">\\n    <input type=\"text\" name=\"message\" placeholder=\"Type new message\">\\n  </form>') ];\n}));                                                                                                       // 12\n                                                                                                           // 13\nTemplate.__checkName(\"message\");                                                                           // 14\nTemplate[\"message\"] = new Template(\"Template.message\", (function() {                                       // 15\n  var view = this;                                                                                         // 16\n  return HTML.DIV({                                                                                        // 17\n    \"class\": \"message\"                                                                                     // 18\n  }, \"\\n      \", HTML.A({                                                                                  // 19\n    \"class\": \"message_username\"                                                                            // 20\n  }, Blaze.View(\"lookup:username\", function() {                                                            // 21\n    return Spacebars.mustache(view.lookup(\"username\"));                                                    // 22\n  })), \"\\n      \", HTML.A({                                                                                // 23\n    \"class\": \"message_text\"                                                                                // 24\n  }, Blaze.View(\"lookup:text\", function() {                                                                // 25\n    return Spacebars.mustache(view.lookup(\"text\"));                                                        // 26\n  })), \"\\n      \", HTML.SPAN({                                                                             // 27\n    \"class\": \"message_timestamp\"                                                                           // 28\n  }, Blaze.View(\"lookup:dateFormat\", function() {                                                          // 29\n    return Spacebars.mustache(view.lookup(\"dateFormat\"), view.lookup(\"createdAt\"));                        // 30\n  })), \"\\n    \");                                                                                          // 31\n}));                                                                                                       // 32\n                                                                                                           // 33\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.rooms.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/template.rooms.js                                                                                //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\n                                                                                                           // 1\nTemplate.__checkName(\"rooms\");                                                                             // 2\nTemplate[\"rooms\"] = new Template(\"Template.rooms\", (function() {                                           // 3\n  var view = this;                                                                                         // 4\n  return [ HTML.Raw(\"<p>\\n    Rooms:\\n  </p>\\n  \"), HTML.FORM({                                            // 5\n    \"class\": \"new-room\"                                                                                    // 6\n  }, \"\\n    \", HTML.Raw('<input type=\"text\" name=\"text\" placeholder=\"Enter room name\">'), \"\\n\\n    \", HTML.LABEL(HTML.INPUT({\n    type: \"checkbox\",                                                                                      // 8\n    checked: function() {                                                                                  // 9\n      return Spacebars.mustache(view.lookup(\"checked\"));                                                   // 10\n    },                                                                                                     // 11\n    \"class\": \"toggle-checked\"                                                                              // 12\n  }), \"Private\"), \"\\n\\n  \"), \"\\n\\n  \", Blaze.Each(function() {                                             // 13\n    return Spacebars.call(view.lookup(\"rooms\"));                                                           // 14\n  }, function() {                                                                                          // 15\n    return [ \"\\n      \", HTML.P({                                                                          // 16\n      \"class\": \"room\"                                                                                      // 17\n    }, Blaze.View(\"lookup:name\", function() {                                                              // 18\n      return Spacebars.mustache(view.lookup(\"name\"));                                                      // 19\n    }), \" \", Blaze.View(\"lookup:isOwner\", function() {                                                     // 20\n      return Spacebars.mustache(view.lookup(\"isOwner\"));                                                   // 21\n    }), \" \"), \"\\n  \" ];                                                                                    // 22\n  }) ];                                                                                                    // 23\n}));                                                                                                       // 24\n                                                                                                           // 25\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.spot.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/template.spot.js                                                                                 //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\n                                                                                                           // 1\nTemplate.__checkName(\"spot\");                                                                              // 2\nTemplate[\"spot\"] = new Template(\"Template.spot\", (function() {                                             // 3\n  var view = this;                                                                                         // 4\n  return HTML.P(HTML.Raw('\\n    <p>\\n      Spot Info\\n      <button class=\"addSpot\">Edit spot info</button>\\n      <button class=\"deleteSpot\">Delete spot</button>\\n    </p>\\n    '), Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"editing\"));                                  // 6\n  }, function() {                                                                                          // 7\n    return [ \"\\n    \", HTML.LI(\"\\n      SpotID: \", Blaze.View(\"lookup:spot._id\", function() {              // 8\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"_id\"));                                // 9\n    }), \"\\n    \"), \"\\n    \", HTML.LI(\"\\n      UserID: \", Blaze.View(\"lookup:spot.user\", function() {       // 10\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"user\"));                               // 11\n    }), \"\\n    \"), \"\\n    \", HTML.FORM({                                                                   // 12\n      \"class\": \"new-spot\"                                                                                  // 13\n    }, \"\\n      \", HTML.LI(\"\\n        Spot Name\", HTML.INPUT({                                             // 14\n      type: \"text\",                                                                                        // 15\n      name: \"spotName\",                                                                                    // 16\n      placeholder: function() {                                                                            // 17\n        return Blaze.If(function() {                                                                       // 18\n          return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"name\"));                               // 19\n        }, function() {                                                                                    // 20\n          return [ \" \", Blaze.View(\"lookup:spot.name\", function() {                                        // 21\n            return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"name\"));                         // 22\n          }), \" \" ];                                                                                       // 23\n        }, function() {                                                                                    // 24\n          return \" Type new \";                                                                             // 25\n        });                                                                                                // 26\n      }                                                                                                    // 27\n    }), \"\\n      \"), \"\\n      \", HTML.LI(\"\\n        Spot Type\", HTML.INPUT({                               // 28\n      type: \"text\",                                                                                        // 29\n      name: \"spotType\",                                                                                    // 30\n      placeholder: function() {                                                                            // 31\n        return Blaze.If(function() {                                                                       // 32\n          return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"type\"));                               // 33\n        }, function() {                                                                                    // 34\n          return [ \" \", Blaze.View(\"lookup:spot.type\", function() {                                        // 35\n            return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"type\"));                         // 36\n          }), \" \" ];                                                                                       // 37\n        }, function() {                                                                                    // 38\n          return \" Add type of spot \";                                                                     // 39\n        });                                                                                                // 40\n      }                                                                                                    // 41\n    }), \"\\n      \"), \"\\n      \", HTML.LI(\"\\n        Description \", HTML.INPUT({                            // 42\n      type: \"text\",                                                                                        // 43\n      name: \"description\",                                                                                 // 44\n      placeholder: function() {                                                                            // 45\n        return Blaze.If(function() {                                                                       // 46\n          return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"descr\"));                              // 47\n        }, function() {                                                                                    // 48\n          return [ \" \", Blaze.View(\"lookup:spot.descr\", function() {                                       // 49\n            return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"descr\"));                        // 50\n          }), \" \" ];                                                                                       // 51\n        }, function() {                                                                                    // 52\n          return \" Add description \";                                                                      // 53\n        });                                                                                                // 54\n      }                                                                                                    // 55\n    }), \"\\n      \"), \"\\n      \", HTML.INPUT({                                                              // 56\n      type: \"submit\",                                                                                      // 57\n      value: \"Submit\"                                                                                      // 58\n    }), \"\\n    \"), \"\\n    \" ];                                                                             // 59\n  }, function() {                                                                                          // 60\n    return [ \"\\n    \", HTML.LI(\"\\n      SpotID: \", Blaze.View(\"lookup:spot._id\", function() {              // 61\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"_id\"));                                // 62\n    }), \"\\n    \"), \"\\n    \", HTML.LI(\"\\n      UserID: \", Blaze.View(\"lookup:spot.user\", function() {       // 63\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"user\"));                               // 64\n    }), \"\\n    \"), \"\\n    \", Blaze.If(function() {                                                         // 65\n      return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"name\"));                                   // 66\n    }, function() {                                                                                        // 67\n      return [ \"\\n    \", HTML.LI(\"\\n      Spot Name \", Blaze.View(\"lookup:spot.name\", function() {         // 68\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"name\"));                             // 69\n      }), \"\\n    \"), \"\\n    \" ];                                                                           // 70\n    }), \"\\n    \", Blaze.If(function() {                                                                    // 71\n      return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"type\"));                                   // 72\n    }, function() {                                                                                        // 73\n      return [ \"\\n    \", HTML.LI(\"\\n      Spot Type \", Blaze.View(\"lookup:spot.type\", function() {         // 74\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"type\"));                             // 75\n      }), \"\\n    \"), \"\\n    \" ];                                                                           // 76\n    }), \"\\n    \", Blaze.If(function() {                                                                    // 77\n      return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"descr\"));                                  // 78\n    }, function() {                                                                                        // 79\n      return [ \"\\n    \", HTML.LI(\"\\n      Spot Description \", Blaze.View(\"lookup:spot.descr\", function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"descr\"));                            // 81\n      }), \"\\n    \"), \"\\n    \" ];                                                                           // 82\n    }), \"\\n    \" ];                                                                                        // 83\n  }), \"\\n\\n  \");                                                                                           // 84\n}));                                                                                                       // 85\n                                                                                                           // 86\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.spots.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/template.spots.js                                                                                //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\n                                                                                                           // 1\nTemplate.body.addContent((function() {                                                                     // 2\n  var view = this;                                                                                         // 3\n  return HTML.DIV(\"\\n    \", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n\\n    \", HTML.DIV({       // 4\n    \"class\": \"mainblock\"                                                                                   // 5\n  }, \"\\n\\n      \", HTML.Raw(\"<p></p>\"), \"\\n      \", HTML.DIV({                                             // 6\n    \"class\": \"message_block\"                                                                               // 7\n  }, \"\\n        \", Blaze.If(function() {                                                                   // 8\n    return Spacebars.call(view.lookup(\"social\"));                                                          // 9\n  }, function() {                                                                                          // 10\n    return [ \"\\n        \", HTML.P(\"\\n          \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"loginButtons\"))), \"\\n          \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"rooms\"))), \"\\n          \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"users\"))), \"\\n        \"), \"\\n        \" ];\n  }, function() {                                                                                          // 12\n    return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"messagesBlock\")), \"\\n        \" ];      // 13\n  }), \"\\n\\n      \"), \"\\n\\n      \", HTML.DIV({                                                              // 14\n    \"class\": \"map_block\"                                                                                   // 15\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"map\")), \"\\n      \"), \"\\n\\n\\n\\n    \", HTML.DIV({  // 16\n    \"class\": \"spot_info\"                                                                                   // 17\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"spot\")), \"\\n    \"), \"\\n    \"), \"\\n  \");              // 18\n}));                                                                                                       // 19\nMeteor.startup(Template.body.renderToDocument);                                                            // 20\n                                                                                                           // 21\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.users.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/template.users.js                                                                                //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\n                                                                                                           // 1\nTemplate.__checkName(\"users\");                                                                             // 2\nTemplate[\"users\"] = new Template(\"Template.users\", (function() {                                           // 3\n  var view = this;                                                                                         // 4\n  return [ HTML.Raw('<p>\\n    Users:\\n  </p>\\n  <form class=\"user\">\\n    <input type=\"text\" name=\"user\" placeholder=\"find users\">\\n  </form>\\n  '), Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"users\"));                                                           // 6\n  }, function() {                                                                                          // 7\n    return [ \"\\n    \", HTML.LI(\"\\n      \", Blaze.View(\"lookup:username\", function() {                      // 8\n      return Spacebars.mustache(view.lookup(\"username\"));                                                  // 9\n    }), \"\\n    \"), \"\\n  \" ];                                                                               // 10\n  }) ];                                                                                                    // 11\n}));                                                                                                       // 12\n                                                                                                           // 13\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"map.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/map.js                                                                                           //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\nvar MAP_ZOOM = 15;                                                                                         // 1\n                                                                                                           //\nMeteor.startup(function () {                                                                               // 3\n  GoogleMaps.load();                                                                                       // 4\n});                                                                                                        // 5\n                                                                                                           //\nTemplate.map.onCreated(function () {                                                                       // 7\n  var self = this;                                                                                         // 8\n                                                                                                           //\n  GoogleMaps.ready('map', function (map) {                                                                 // 10\n    var marker = void 0;                                                                                   // 11\n                                                                                                           //\n    self.autorun(function () {                                                                             // 13\n      var latLng = Geolocation.latLng();                                                                   // 14\n      //Write user position to db                                                                          //\n      console.log(latLng);                                                                                 // 16\n      var userId = Meteor.userId();                                                                        // 17\n      var userPosition = Position.findOne({ user: userId });                                               // 18\n                                                                                                           //\n      if (!userPosition && Meteor.userId()) {                                                              // 20\n        Position.insert({                                                                                  // 21\n          user: Meteor.userId(),                                                                           // 22\n          latLng: latLng                                                                                   // 23\n        });                                                                                                // 21\n      } else {                                                                                             // 25\n        Position.update({ _id: userPosition._id }, { $set: { latLng: latLng } });                          // 27\n      }                                                                                                    // 28\n      console.log(userPosition.latLng);                                                                    // 29\n      //Finished writing user position to db                                                               //\n      if (!latLng) return;                                                                                 // 31\n                                                                                                           //\n      if (!marker) {                                                                                       // 34\n        marker = new google.maps.Marker({                                                                  // 35\n          position: new google.maps.LatLng(latLng.lat, latLng.lng),                                        // 36\n          map: map.instance,                                                                               // 37\n          label: 'R'                                                                                       // 38\n        });                                                                                                // 35\n      } else {                                                                                             // 40\n        marker.setPosition(latLng);                                                                        // 43\n      }                                                                                                    // 44\n      map.instance.setCenter(marker.getPosition());                                                        // 45\n      map.instance.setZoom(MAP_ZOOM);                                                                      // 46\n    });                                                                                                    // 49\n                                                                                                           //\n    //Add custom markers on map                                                                            //\n    google.maps.event.addListener(map.instance, 'click', function (event) {                                // 52\n      Spots.insert({ lat: event.latLng.lat(), lng: event.latLng.lng(), user: Meteor.userId() });           // 53\n      console.log(Spots.find().fetch());                                                                   // 54\n    });                                                                                                    // 55\n                                                                                                           //\n    var markers = {};                                                                                      // 57\n                                                                                                           //\n    Spots.find().observe({                                                                                 // 59\n      added: function () {                                                                                 // 60\n        function added(document) {                                                                         // 59\n          var marker = new google.maps.Marker({                                                            // 61\n            draggable: true,                                                                               // 62\n            animation: google.maps.Animation.DROP,                                                         // 63\n            position: new google.maps.LatLng(document.lat, document.lng),                                  // 64\n            label: 'S',                                                                                    // 65\n            map: map.instance,                                                                             // 66\n            id: document._id                                                                               // 67\n          });                                                                                              // 61\n                                                                                                           //\n          google.maps.event.addListener(marker, 'dragend', function (event) {                              // 70\n            Spots.update(marker.id, { $set: { lat: event.latLng.lat(), lng: event.latLng.lng() } });       // 71\n          });                                                                                              // 72\n                                                                                                           //\n          google.maps.event.addListener(marker, 'click', function (event) {                                // 74\n            var selectedMarker = marker.id;                                                                // 75\n            Session.set('place', marker.id);                                                               // 76\n            console.log(selectedMarker);                                                                   // 77\n          });                                                                                              // 78\n          markers[document._id] = marker;                                                                  // 79\n        }                                                                                                  // 80\n                                                                                                           //\n        return added;                                                                                      // 59\n      }(),                                                                                                 // 59\n                                                                                                           //\n      changed: function () {                                                                               // 81\n        function changed(newDocument, oldDocument) {                                                       // 81\n          markers[newDocument._id].setPosition({ lat: newDocument.lat, lng: newDocument.lng });            // 82\n        }                                                                                                  // 83\n                                                                                                           //\n        return changed;                                                                                    // 81\n      }(),                                                                                                 // 81\n      removed: function () {                                                                               // 84\n        function removed(oldDocument) {                                                                    // 84\n          markers[oldDocument._id].setMap(null);                                                           // 85\n          google.maps.event.clearInstanceListeners(markers[oldDocument._id]);                              // 86\n          delete markers[oldDocument._id];                                                                 // 87\n        }                                                                                                  // 88\n                                                                                                           //\n        return removed;                                                                                    // 84\n      }()                                                                                                  // 84\n    });                                                                                                    // 59\n  });                                                                                                      // 92\n});                                                                                                        // 93\n                                                                                                           //\nTemplate.map.helpers({                                                                                     // 95\n  geolocationError: function () {                                                                          // 96\n    function geolocationError() {                                                                          // 96\n      var error = Geolocation.error();                                                                     // 97\n      return error && error.message;                                                                       // 98\n    }                                                                                                      // 99\n                                                                                                           //\n    return geolocationError;                                                                               // 96\n  }(),                                                                                                     // 96\n  mapOptions: function () {                                                                                // 100\n    function mapOptions() {                                                                                // 100\n      var latLng = Geolocation.latLng();                                                                   // 101\n      if (GoogleMaps.loaded() && latLng) {                                                                 // 102\n        return {                                                                                           // 103\n          center: new google.maps.LatLng(latLng.lat, latLng.lng),                                          // 104\n          zoom: MAP_ZOOM                                                                                   // 105\n        };                                                                                                 // 103\n      }                                                                                                    // 107\n    }                                                                                                      // 108\n                                                                                                           //\n    return mapOptions;                                                                                     // 100\n  }()                                                                                                      // 100\n});                                                                                                        // 95\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"messages.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/messages.js                                                                                      //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\nTemplate.messagesBlock.helpers({                                                                           // 1\n  messages: function () {                                                                                  // 2\n    function messages() {                                                                                  // 1\n      var room = Session.get('room');                                                                      // 3\n      if (room) {                                                                                          // 4\n        return Messages.find({ room: room }, { limit: 20 });                                               // 5\n      } else {                                                                                             // 6\n        return Messages.find({ room: undefined }, { sort: { createdAt: -1 } }, { limit: 15 });             // 7\n      }                                                                                                    // 8\n    }                                                                                                      // 10\n                                                                                                           //\n    return messages;                                                                                       // 1\n  }()                                                                                                      // 1\n});                                                                                                        // 1\n                                                                                                           //\nTemplate.messagesBlock.events({                                                                            // 13\n  \"submit .new-message\": function () {                                                                     // 14\n    function submitNewMessage(event) {                                                                     // 13\n      event.preventDefault();                                                                              // 15\n      var text = event.target.message.value;                                                               // 16\n      var room = Session.get('room');                                                                      // 17\n                                                                                                           //\n      Messages.insert({                                                                                    // 19\n        text: text,                                                                                        // 20\n        createdAt: new Date(),                                                                             // 21\n        owner: Meteor.userId(),                                                                            // 22\n        username: Meteor.user().username,                                                                  // 23\n        room: room                                                                                         // 24\n      });                                                                                                  // 19\n      event.target.message.value = \"\";                                                                     // 26\n    }                                                                                                      // 27\n                                                                                                           //\n    return submitNewMessage;                                                                               // 13\n  }()                                                                                                      // 13\n});                                                                                                        // 13\n                                                                                                           //\nAccounts.ui.config({                                                                                       // 30\n  passwordSignupFields: \"USERNAME_ONLY\"                                                                    // 31\n});                                                                                                        // 30\n                                                                                                           //\nTemplate.message.helpers({                                                                                 // 34\n  dateFormat: function () {                                                                                // 35\n    function dateFormat(time) {                                                                            // 34\n      var date = new Date(time);                                                                           // 36\n      var hours = \"0\" + date.getHours();                                                                   // 37\n      var minutes = \"0\" + date.getMinutes();                                                               // 38\n      var seconds = \"0\" + date.getSeconds();                                                               // 39\n      var day = \"0\" + date.getDate();                                                                      // 40\n      var month = \"0\" + date.getMonth();                                                                   // 41\n      var year = date.getFullYear();                                                                       // 42\n      var out = \"\";                                                                                        // 43\n      var now = new Date();                                                                                // 44\n      if (now - time > 86400000) {                                                                         // 45\n        out = day.substr(day.length - 2) + \".\" + month.substr(day.length - 2) + \".\" + year;                // 46\n      } else {                                                                                             // 47\n        out = hours.substr(hours.length - 2) + \":\" + minutes.substr(minutes.length - 2) + \":\" + seconds.substr(seconds.length - 2);\n      }                                                                                                    // 49\n      return out;                                                                                          // 50\n    }                                                                                                      // 51\n                                                                                                           //\n    return dateFormat;                                                                                     // 34\n  }()                                                                                                      // 34\n});                                                                                                        // 34\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"rooms.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/rooms.js                                                                                         //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\nTemplate.rooms.helpers({                                                                                   // 1\n  rooms: function () {                                                                                     // 2\n    function rooms() {                                                                                     // 1\n                                                                                                           //\n      return Rooms.find({ owner: Meteor.userId() });                                                       // 4\n    }                                                                                                      // 5\n                                                                                                           //\n    return rooms;                                                                                          // 1\n  }(),                                                                                                     // 1\n  isOwner: function () {                                                                                   // 6\n    function isOwner() {                                                                                   // 1\n      return this.owner === Meteor.userId();                                                               // 7\n    }                                                                                                      // 9\n                                                                                                           //\n    return isOwner;                                                                                        // 1\n  }()                                                                                                      // 1\n});                                                                                                        // 1\n                                                                                                           //\nTemplate.rooms.events({                                                                                    // 13\n  \"submit .new-room\": function () {                                                                        // 14\n    function submitNewRoom(event) {                                                                        // 13\n      event.preventDefault();                                                                              // 15\n      var roomName = event.target.text.value;                                                              // 16\n                                                                                                           //\n      Rooms.insert({                                                                                       // 18\n        name: roomName,                                                                                    // 19\n        createdAt: new Date(),                                                                             // 20\n        owner: Meteor.userId(),                                                                            // 21\n        guests: []                                                                                         // 22\n      });                                                                                                  // 18\n      event.target.text.value = \"\";                                                                        // 24\n    }                                                                                                      // 25\n                                                                                                           //\n    return submitNewRoom;                                                                                  // 13\n  }(),                                                                                                     // 13\n  \"click .room\": function () {                                                                             // 26\n    function clickRoom() {                                                                                 // 13\n      Session.set('room', this._id);                                                                       // 27\n    }                                                                                                      // 28\n                                                                                                           //\n    return clickRoom;                                                                                      // 13\n  }()                                                                                                      // 13\n});                                                                                                        // 13\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"spot.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/spot.js                                                                                          //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\nTemplate.spot.helpers({                                                                                    // 1\n  spot: function () {                                                                                      // 2\n    function spot() {                                                                                      // 2\n      return Spots.findOne(Session.get('place'));                                                          // 3\n    }                                                                                                      // 4\n                                                                                                           //\n    return spot;                                                                                           // 2\n  }()                                                                                                      // 2\n});                                                                                                        // 1\n                                                                                                           //\nTemplate.spot.events({                                                                                     // 7\n  \"click .addSpot\": function () {                                                                          // 8\n    function clickAddSpot() {                                                                              // 7\n      var spot = Session.get('place');                                                                     // 9\n      var cheked = Spots.findOne(spot).editing;                                                            // 10\n      Spots.update(spot, { $set: { editing: !cheked } });                                                  // 11\n      console.log(cheked);                                                                                 // 12\n    }                                                                                                      // 13\n                                                                                                           //\n    return clickAddSpot;                                                                                   // 7\n  }(),                                                                                                     // 7\n  \"click .deleteSpot\": function () {                                                                       // 14\n    function clickDeleteSpot() {                                                                           // 7\n      var spot = Session.get('place');                                                                     // 15\n      Spots.remove(spot);                                                                                  // 16\n    }                                                                                                      // 17\n                                                                                                           //\n    return clickDeleteSpot;                                                                                // 7\n  }(),                                                                                                     // 7\n  \"submit .new-spot\": function () {                                                                        // 18\n    function submitNewSpot(event) {                                                                        // 7\n      event.preventDefault();                                                                              // 19\n      var name = event.target.spotName.value;                                                              // 20\n      var typeSpot = event.target.spotType.value;                                                          // 21\n      var descr = event.target.description.value;                                                          // 22\n      var spot = Session.get('place');                                                                     // 23\n      var cheked = Spots.findOne(spot).editing;                                                            // 24\n      Spots.update(spot, { $set: {                                                                         // 25\n          \"name\": name,                                                                                    // 26\n          \"type\": typeSpot,                                                                                // 27\n          \"descr\": descr,                                                                                  // 28\n          \"editing\": !cheked                                                                               // 29\n        }                                                                                                  // 25\n      });                                                                                                  // 25\n    }                                                                                                      // 32\n                                                                                                           //\n    return submitNewSpot;                                                                                  // 7\n  }()                                                                                                      // 7\n});                                                                                                        // 7\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"spots.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/spots.js                                                                                         //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\nTemplate.body.events({                                                                                     // 1\n  'click .social': function () {                                                                           // 2\n    function clickSocial() {                                                                               // 1\n      Session.set('social', !Session.get('social'));                                                       // 3\n    }                                                                                                      // 4\n                                                                                                           //\n    return clickSocial;                                                                                    // 1\n  }()                                                                                                      // 1\n});                                                                                                        // 1\n                                                                                                           //\nTemplate.body.helpers({                                                                                    // 7\n  'social': function () {                                                                                  // 8\n    function social() {                                                                                    // 7\n      return Session.get('social');                                                                        // 9\n    }                                                                                                      // 10\n                                                                                                           //\n    return social;                                                                                         // 7\n  }()                                                                                                      // 7\n});                                                                                                        // 7\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"users.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// client/users.js                                                                                         //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\nTemplate.users.helpers({                                                                                   // 1\n  users: function () {                                                                                     // 2\n    function users() {                                                                                     // 2\n      return Meteor.users.find();                                                                          // 3\n    }                                                                                                      // 4\n                                                                                                           //\n    return users;                                                                                          // 2\n  }()                                                                                                      // 2\n});                                                                                                        // 1\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lib\":{\"collections.js\":function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                         //\n// lib/collections.js                                                                                      //\n//                                                                                                         //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                           //\nMessages = new Mongo.Collection('messages');                                                               // 1\nRooms = new Mongo.Collection('rooms');                                                                     // 2\nPosition = new Mongo.Collection('position');                                                               // 3\nSpots = new Mongo.Collection('spots');                                                                     // 4\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\"extensions\":[\".js\",\".json\",\".html\",\".css\"]});\nrequire(\"./client/template.header.js\");\nrequire(\"./client/template.map.js\");\nrequire(\"./client/template.messages.js\");\nrequire(\"./client/template.rooms.js\");\nrequire(\"./client/template.spot.js\");\nrequire(\"./client/template.spots.js\");\nrequire(\"./client/template.users.js\");\nrequire(\"./lib/collections.js\");\nrequire(\"./client/map.js\");\nrequire(\"./client/messages.js\");\nrequire(\"./client/rooms.js\");\nrequire(\"./client/spot.js\");\nrequire(\"./client/spots.js\");\nrequire(\"./client/users.js\");","servePath":"/app.js","sourceMap":{"version":3,"sources":["/client/template.header.js","/client/template.map.js","/client/template.messages.js","/client/template.rooms.js","/client/template.spot.js","/client/template.spots.js","/client/template.users.js","/client/map.js","/client/messages.js","/client/rooms.js","/client/spot.js","/client/spots.js","/client/users.js","/lib/collections.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gH;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gH;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gH;;;;;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gH;;;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gH;;;;;;;;;;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gH;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gH;;;;;;;;;;;ACZA,IAAI,WAAW,EAAf;;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","file":"/app.js","sourcesContent":["\nTemplate.__checkName(\"header\");\nTemplate[\"header\"] = new Template(\"Template.header\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"header\"\n  }, \"\\n    \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"loginButtons\"))), HTML.Raw('\\n    <button class=\"social\">&#9776;Social</button>\\n    <button>Map</button>\\n    <button>Chat</button>\\n    '), Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"social\"));\n  }, function() {\n    return [ \"\\n    \", HTML.P(\"\\n      \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"loginButtons\"))), \"\\n      \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"rooms\"))), \"\\n      \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"users\"))), \"\\n    \"), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n","\nTemplate.__checkName(\"map\");\nTemplate[\"map\"] = new Template(\"Template.map\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"map-container\"\n  }, \"\\n    \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"geolocationError\"));\n  }, function() {\n    return [ \"\\n      \", Blaze._TemplateWith(function() {\n      return {\n        name: Spacebars.call(\"map\"),\n        options: Spacebars.call(view.lookup(\"mapOptions\"))\n      };\n    }, function() {\n      return Spacebars.include(view.lookupTemplate(\"googleMap\"));\n    }), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n      Geolocation faild: \", Blaze.View(\"lookup:geolocationError\", function() {\n      return Spacebars.mustache(view.lookup(\"geolocationError\"));\n    }), \"\\n      \" ];\n  }), \"\\n  \");\n}));\n","\nTemplate.__checkName(\"messagesBlock\");\nTemplate[\"messagesBlock\"] = new Template(\"Template.messagesBlock\", (function() {\n  var view = this;\n  return [ HTML.DIV({\n    \"class\": \"messagesBlock\"\n  }, \"\\n    \", HTML.UL(\"\\n\\n      \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"messages\"));\n  }, function() {\n    return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"message\")), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n  \"), HTML.Raw('\\n\\n  <form class=\"new-message\">\\n    <input type=\"text\" name=\"message\" placeholder=\"Type new message\">\\n  </form>') ];\n}));\n\nTemplate.__checkName(\"message\");\nTemplate[\"message\"] = new Template(\"Template.message\", (function() {\n  var view = this;\n  return HTML.DIV({\n    \"class\": \"message\"\n  }, \"\\n      \", HTML.A({\n    \"class\": \"message_username\"\n  }, Blaze.View(\"lookup:username\", function() {\n    return Spacebars.mustache(view.lookup(\"username\"));\n  })), \"\\n      \", HTML.A({\n    \"class\": \"message_text\"\n  }, Blaze.View(\"lookup:text\", function() {\n    return Spacebars.mustache(view.lookup(\"text\"));\n  })), \"\\n      \", HTML.SPAN({\n    \"class\": \"message_timestamp\"\n  }, Blaze.View(\"lookup:dateFormat\", function() {\n    return Spacebars.mustache(view.lookup(\"dateFormat\"), view.lookup(\"createdAt\"));\n  })), \"\\n    \");\n}));\n","\nTemplate.__checkName(\"rooms\");\nTemplate[\"rooms\"] = new Template(\"Template.rooms\", (function() {\n  var view = this;\n  return [ HTML.Raw(\"<p>\\n    Rooms:\\n  </p>\\n  \"), HTML.FORM({\n    \"class\": \"new-room\"\n  }, \"\\n    \", HTML.Raw('<input type=\"text\" name=\"text\" placeholder=\"Enter room name\">'), \"\\n\\n    \", HTML.LABEL(HTML.INPUT({\n    type: \"checkbox\",\n    checked: function() {\n      return Spacebars.mustache(view.lookup(\"checked\"));\n    },\n    \"class\": \"toggle-checked\"\n  }), \"Private\"), \"\\n\\n  \"), \"\\n\\n  \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"rooms\"));\n  }, function() {\n    return [ \"\\n      \", HTML.P({\n      \"class\": \"room\"\n    }, Blaze.View(\"lookup:name\", function() {\n      return Spacebars.mustache(view.lookup(\"name\"));\n    }), \" \", Blaze.View(\"lookup:isOwner\", function() {\n      return Spacebars.mustache(view.lookup(\"isOwner\"));\n    }), \" \"), \"\\n  \" ];\n  }) ];\n}));\n","\nTemplate.__checkName(\"spot\");\nTemplate[\"spot\"] = new Template(\"Template.spot\", (function() {\n  var view = this;\n  return HTML.P(HTML.Raw('\\n    <p>\\n      Spot Info\\n      <button class=\"addSpot\">Edit spot info</button>\\n      <button class=\"deleteSpot\">Delete spot</button>\\n    </p>\\n    '), Blaze.If(function() {\n    return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"editing\"));\n  }, function() {\n    return [ \"\\n    \", HTML.LI(\"\\n      SpotID: \", Blaze.View(\"lookup:spot._id\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"_id\"));\n    }), \"\\n    \"), \"\\n    \", HTML.LI(\"\\n      UserID: \", Blaze.View(\"lookup:spot.user\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"user\"));\n    }), \"\\n    \"), \"\\n    \", HTML.FORM({\n      \"class\": \"new-spot\"\n    }, \"\\n      \", HTML.LI(\"\\n        Spot Name\", HTML.INPUT({\n      type: \"text\",\n      name: \"spotName\",\n      placeholder: function() {\n        return Blaze.If(function() {\n          return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"name\"));\n        }, function() {\n          return [ \" \", Blaze.View(\"lookup:spot.name\", function() {\n            return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"name\"));\n          }), \" \" ];\n        }, function() {\n          return \" Type new \";\n        });\n      }\n    }), \"\\n      \"), \"\\n      \", HTML.LI(\"\\n        Spot Type\", HTML.INPUT({\n      type: \"text\",\n      name: \"spotType\",\n      placeholder: function() {\n        return Blaze.If(function() {\n          return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"type\"));\n        }, function() {\n          return [ \" \", Blaze.View(\"lookup:spot.type\", function() {\n            return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"type\"));\n          }), \" \" ];\n        }, function() {\n          return \" Add type of spot \";\n        });\n      }\n    }), \"\\n      \"), \"\\n      \", HTML.LI(\"\\n        Description \", HTML.INPUT({\n      type: \"text\",\n      name: \"description\",\n      placeholder: function() {\n        return Blaze.If(function() {\n          return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"descr\"));\n        }, function() {\n          return [ \" \", Blaze.View(\"lookup:spot.descr\", function() {\n            return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"descr\"));\n          }), \" \" ];\n        }, function() {\n          return \" Add description \";\n        });\n      }\n    }), \"\\n      \"), \"\\n      \", HTML.INPUT({\n      type: \"submit\",\n      value: \"Submit\"\n    }), \"\\n    \"), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n    \", HTML.LI(\"\\n      SpotID: \", Blaze.View(\"lookup:spot._id\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"_id\"));\n    }), \"\\n    \"), \"\\n    \", HTML.LI(\"\\n      UserID: \", Blaze.View(\"lookup:spot.user\", function() {\n      return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"user\"));\n    }), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"name\"));\n    }, function() {\n      return [ \"\\n    \", HTML.LI(\"\\n      Spot Name \", Blaze.View(\"lookup:spot.name\", function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"name\"));\n      }), \"\\n    \"), \"\\n    \" ];\n    }), \"\\n    \", Blaze.If(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"type\"));\n    }, function() {\n      return [ \"\\n    \", HTML.LI(\"\\n      Spot Type \", Blaze.View(\"lookup:spot.type\", function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"type\"));\n      }), \"\\n    \"), \"\\n    \" ];\n    }), \"\\n    \", Blaze.If(function() {\n      return Spacebars.call(Spacebars.dot(view.lookup(\"spot\"), \"descr\"));\n    }, function() {\n      return [ \"\\n    \", HTML.LI(\"\\n      Spot Description \", Blaze.View(\"lookup:spot.descr\", function() {\n        return Spacebars.mustache(Spacebars.dot(view.lookup(\"spot\"), \"descr\"));\n      }), \"\\n    \"), \"\\n    \" ];\n    }), \"\\n    \" ];\n  }), \"\\n\\n  \");\n}));\n","\nTemplate.body.addContent((function() {\n  var view = this;\n  return HTML.DIV(\"\\n    \", Spacebars.include(view.lookupTemplate(\"header\")), \"\\n\\n    \", HTML.DIV({\n    \"class\": \"mainblock\"\n  }, \"\\n\\n      \", HTML.Raw(\"<p></p>\"), \"\\n      \", HTML.DIV({\n    \"class\": \"message_block\"\n  }, \"\\n        \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"social\"));\n  }, function() {\n    return [ \"\\n        \", HTML.P(\"\\n          \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"loginButtons\"))), \"\\n          \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"rooms\"))), \"\\n          \", HTML.SPAN(Spacebars.include(view.lookupTemplate(\"users\"))), \"\\n        \"), \"\\n        \" ];\n  }, function() {\n    return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"messagesBlock\")), \"\\n        \" ];\n  }), \"\\n\\n      \"), \"\\n\\n      \", HTML.DIV({\n    \"class\": \"map_block\"\n  }, \"\\n        \", Spacebars.include(view.lookupTemplate(\"map\")), \"\\n      \"), \"\\n\\n\\n\\n    \", HTML.DIV({\n    \"class\": \"spot_info\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"spot\")), \"\\n    \"), \"\\n    \"), \"\\n  \");\n}));\nMeteor.startup(Template.body.renderToDocument);\n","\nTemplate.__checkName(\"users\");\nTemplate[\"users\"] = new Template(\"Template.users\", (function() {\n  var view = this;\n  return [ HTML.Raw('<p>\\n    Users:\\n  </p>\\n  <form class=\"user\">\\n    <input type=\"text\" name=\"user\" placeholder=\"find users\">\\n  </form>\\n  '), Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"users\"));\n  }, function() {\n    return [ \"\\n    \", HTML.LI(\"\\n      \", Blaze.View(\"lookup:username\", function() {\n      return Spacebars.mustache(view.lookup(\"username\"));\n    }), \"\\n    \"), \"\\n  \" ];\n  }) ];\n}));\n","let MAP_ZOOM = 15;\n\nMeteor.startup(function() {\n  GoogleMaps.load();\n});\n\nTemplate.map.onCreated(function() {\n  let self = this;\n\n  GoogleMaps.ready('map', function(map) {\n    let marker;\n\n    self.autorun(function () {\n      let latLng = Geolocation.latLng();\n      //Write user position to db\n      console.log(latLng);\n      const userId = Meteor.userId();\n      const userPosition = Position.findOne({user: userId});\n\n      if(!userPosition && Meteor.userId()) {\n        Position.insert({\n            user: Meteor.userId(),\n            latLng: latLng\n        });\n      }\n      else {\n        Position.update({_id: userPosition._id}, { $set: {latLng: latLng}});\n      }\n      console.log(userPosition.latLng);\n      //Finished writing user position to db\n      if(! latLng)\n      return;\n\n      if(!marker) {\n        marker = new google.maps.Marker({\n          position: new google.maps.LatLng(latLng.lat, latLng.lng),\n          map: map.instance,\n          label: 'R'\n        });\n      }\n\n      else {\n        marker.setPosition(latLng);\n      }\n      map.instance.setCenter(marker.getPosition());\n      map.instance.setZoom(MAP_ZOOM);\n\n\n    });\n\n    //Add custom markers on map\n    google.maps.event.addListener(map.instance, 'click', function(event) {\n      Spots.insert({ lat: event.latLng.lat(), lng: event.latLng.lng(), user: Meteor.userId() });\n      console.log(Spots.find().fetch());\n    });\n\n     var markers = {};\n\n    Spots.find().observe({\n      added (document) {\n        let marker = new google.maps.Marker({\n          draggable: true,\n          animation: google.maps.Animation.DROP,\n          position: new google.maps.LatLng(document.lat, document.lng),\n          label: 'S',\n          map: map.instance,\n          id: document._id\n        });\n\n        google.maps.event.addListener(marker, 'dragend', function(event) {\n          Spots.update(marker.id, {$set: {lat: event.latLng.lat(), lng: event.latLng.lng()}});\n        });\n\n        google.maps.event.addListener(marker, 'click', function(event) {\n          let selectedMarker = marker.id;\n          Session.set('place', marker.id);\n          console.log(selectedMarker);\n        });\n        markers[document._id] = marker;\n      },\n      changed: function (newDocument, oldDocument) {\n        markers[newDocument._id].setPosition({lat: newDocument.lat, lng: newDocument.lng});\n      },\n      removed: function (oldDocument) {\n        markers[oldDocument._id].setMap(null);\n        google.maps.event.clearInstanceListeners(markers[oldDocument._id]);\n        delete markers[oldDocument._id];\n      }\n    });\n\n\n  });\n});\n\nTemplate.map.helpers({\n  geolocationError: function () {\n    var error = Geolocation.error();\n    return error && error.message;\n  },\n  mapOptions: function () {\n    var latLng = Geolocation.latLng();\n    if(GoogleMaps.loaded() && latLng) {\n      return {\n        center: new google.maps.LatLng(latLng.lat, latLng.lng),\n        zoom: MAP_ZOOM\n      };\n    }\n  }\n});\n","Template.messagesBlock.helpers({\n  messages () {\n    const room = Session.get('room');\n    if(room) {\n      return Messages.find({room: room}, {limit: 20});\n    } else {\n      return Messages.find({room: undefined},  { sort: { createdAt: -1 } }, {limit: 15});\n    }\n\n  }\n});\n\nTemplate.messagesBlock.events({\n  \"submit .new-message\" (event) {\n    event.preventDefault();\n    const text = event.target.message.value;\n    const room = Session.get('room');\n\n    Messages.insert({\n      text: text,\n      createdAt: new Date(),\n      owner: Meteor.userId(),\n      username: Meteor.user().username,\n      room: room\n    });\n    event.target.message.value = \"\";\n  }\n});\n\nAccounts.ui.config({\n    passwordSignupFields: \"USERNAME_ONLY\"\n});\n\nTemplate.message.helpers({\n  dateFormat (time) {\n    const date = new Date (time);\n    const hours = \"0\" + date.getHours();\n    const minutes = \"0\" + date.getMinutes();\n    const seconds = \"0\" + date.getSeconds();\n    const day = \"0\" + date.getDate();\n    const month = \"0\" + date.getMonth();\n    const year = date.getFullYear();\n    let out = \"\";\n    const now = new Date();\n    if (now-time>86400000) {\n      out = day.substr(day.length - 2) + \".\" + month.substr(day.length - 2) + \".\" + year;\n    } else {\n      out = hours.substr(hours.length - 2) + \":\" + minutes.substr(minutes.length - 2) + \":\" + seconds.substr(seconds.length - 2);\n    }\n    return out;\n  }\n});\n","Template.rooms.helpers({\n  rooms () {\n\n    return Rooms.find({owner: Meteor.userId()});\n  },\n  isOwner () {\n    return this.owner === Meteor.userId();\n\n  }\n\n});\n\nTemplate.rooms.events({\n  \"submit .new-room\" (event) {\n    event.preventDefault();\n    let roomName = event.target.text.value;\n\n    Rooms.insert({\n      name: roomName,\n      createdAt: new Date(),\n      owner: Meteor.userId(),\n      guests: []\n    });\n    event.target.text.value = \"\";\n  },\n  \"click .room\" () {\n    Session.set('room', this._id);\n  }\n});\n","Template.spot.helpers({\n  spot: function () {\n    return Spots.findOne(Session.get('place'));\n  }\n});\n\nTemplate.spot.events({\n  \"click .addSpot\" () {\n    const spot = Session.get('place');\n    const cheked = Spots.findOne(spot).editing;\n    Spots.update(spot, {$set: {editing: !cheked}});\n    console.log(cheked);\n  },\n  \"click .deleteSpot\" () {\n    const spot = Session.get('place');\n    Spots.remove(spot);\n  },\n  \"submit .new-spot\" (event) {\n    event.preventDefault();\n    const name = event.target.spotName.value;\n    const typeSpot = event.target.spotType.value;\n    const descr = event.target.description.value;\n    const spot = Session.get('place');\n    const cheked = Spots.findOne(spot).editing;\n    Spots.update(spot, {$set: {\n      \"name\": name,\n      \"type\": typeSpot,\n      \"descr\": descr,\n      \"editing\" : !cheked\n    }\n    });\n  }\n});\n","Template.body.events({\n  'click .social' () {\n    Session.set('social', !Session.get('social'));\n  }\n});\n\nTemplate.body.helpers({\n  'social' () {\n    return Session.get('social');\n  }\n});\n","Template.users.helpers({\n  users: function() {\n    return Meteor.users.find();\n  }\n});\n\n","Messages = new Mongo.Collection('messages');\nRooms = new Mongo.Collection('rooms');\nPosition = new Mongo.Collection('position');\nSpots = new Mongo.Collection('spots');\n"]}}]