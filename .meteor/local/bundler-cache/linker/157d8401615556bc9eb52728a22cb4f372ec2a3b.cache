[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar Accounts = Package['accounts-base'].Accounts;\nvar AccountsClient = Package['accounts-base'].AccountsClient;\nvar ServiceConfiguration = Package['service-configuration'].ServiceConfiguration;\nvar OAuth = Package.oauth.OAuth;\nvar Oauth = Package.oauth.Oauth;\nvar Random = Package.random.Random;\nvar Template = Package.templating.Template;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar VK;\n\n(function(){\n\n///////////////////////////////////////////////////////////////////////\n//                                                                   //\n// packages/mrt_accounts-vk/packages/mrt_accounts-vk.js              //\n//                                                                   //\n///////////////////////////////////////////////////////////////////////\n                                                                     //\n(function () {                                                       // 1\n                                                                     // 2\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt:accounts-vk/lib/accounts_vk.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nAccounts.oauth.registerService('vk');                                                                                  // 1\n                                                                                                                       // 2\nif (Meteor.isClient) {                                                                                                 // 3\n    Meteor.loginWithVk = function(options, callback) {                                                                 // 4\n        // support a callback without options                                                                          // 5\n        if (! callback && typeof options === \"function\") {                                                             // 6\n            callback = options;                                                                                        // 7\n            options = null;                                                                                            // 8\n        }                                                                                                              // 9\n                                                                                                                       // 10\n        var credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback);             // 11\n        VK.requestCredential(options, credentialRequestCompleteCallback);                                              // 12\n    };                                                                                                                 // 13\n} else {                                                                                                               // 14\n    Accounts.addAutopublishFields({                                                                                    // 15\n        forLoggedInUser: ['services.vk'],                                                                              // 16\n        forOtherUsers: [                                                                                               // 17\n            'services.vk.id',                                                                                          // 18\n            'services.vk.nickname',                                                                                    // 19\n            'services.vk.gender'                                                                                       // 20\n        ]                                                                                                              // 21\n    });                                                                                                                // 22\n}                                                                                                                      // 23\n                                                                                                                       // 24\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                     // 34\n}).call(this);                                                       // 35\n                                                                     // 36\n                                                                     // 37\n                                                                     // 38\n                                                                     // 39\n                                                                     // 40\n                                                                     // 41\n(function () {                                                       // 42\n                                                                     // 43\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt:accounts-vk/lib/vk_client.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nVK = {};                                                                                                               // 1\n                                                                                                                       // 2\nVK.requestCredential = function (options, credentialRequestCompleteCallback) {                                         // 3\n                                                                                                                       // 4\n    if (!credentialRequestCompleteCallback && typeof options === 'function') {                                         // 5\n        credentialRequestCompleteCallback = options;                                                                   // 6\n        options = {};                                                                                                  // 7\n    }                                                                                                                  // 8\n                                                                                                                       // 9\n    var config = ServiceConfiguration.configurations.findOne({service: 'vk'});                                         // 10\n    if (!config) {                                                                                                     // 11\n        credentialRequestCompleteCallback && credentialRequestCompleteCallback(new ServiceConfiguration.ConfigError(\"Service not configured\"));\n        return;                                                                                                        // 13\n    }                                                                                                                  // 14\n                                                                                                                       // 15\n    var credentialToken = Random.id();                                                                                 // 16\n    var mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent);                 // 17\n    var display = mobile ? 'touch' : 'popup';                                                                          // 18\n    var scope = '';                                                                                                    // 19\n                                                                                                                       // 20\n    if (config.scope) {                                                                                                // 21\n        scope = config.scope;                                                                                          // 22\n        if (options && options.requestPermissions) {                                                                   // 23\n            scope = scope + ',';                                                                                       // 24\n        }                                                                                                              // 25\n    }                                                                                                                  // 26\n                                                                                                                       // 27\n    if (options && options.requestPermissions) {                                                                       // 28\n        scope = scope + options.requestPermissions.join(',');                                                          // 29\n    }                                                                                                                  // 30\n                                                                                                                       // 31\n    var loginUrl =                                                                                                     // 32\n        'https://oauth.vk.com/authorize' +                                                                             // 33\n            '?client_id=' + config.appId +                                                                             // 34\n            '&scope='     + scope +                                                                                    // 35\n            '&redirect_uri=' + Meteor.absoluteUrl('_oauth/vk?close=close', {replaceLocalhost: false}) +                // 36\n            '&response_type=code' +                                                                                    // 37\n            '&display=' + display +                                                                                    // 38\n            '&state=' + credentialToken;                                                                               // 39\n    Oauth.initiateLogin(credentialToken, loginUrl, credentialRequestCompleteCallback);                                 // 40\n};                                                                                                                     // 41\n                                                                                                                       // 42\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                     // 93\n}).call(this);                                                       // 94\n                                                                     // 95\n                                                                     // 96\n                                                                     // 97\n                                                                     // 98\n                                                                     // 99\n                                                                     // 100\n(function () {                                                       // 101\n                                                                     // 102\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt:accounts-vk/lib/template.vk_configure.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n                                                                                                                       // 1\nTemplate.__checkName(\"configureLoginServiceDialogForVk\");                                                              // 2\nTemplate[\"configureLoginServiceDialogForVk\"] = new Template(\"Template.configureLoginServiceDialogForVk\", (function() { // 3\n  var view = this;                                                                                                     // 4\n  return [ HTML.Raw(\"<p>\\n        First, you'll need to register your client on VKontakte. Follow these steps:\\n    </p>\\n    \"), HTML.OL(\"\\n        \", HTML.Raw('<li>\\n            Visit <a href=\"http://vk.com/editapp?act=create\" target=\"_blank\">http://vk.com/editapp?act=create</a>\\n        </li>'), \"\\n        \", HTML.LI(\"\\n            Set Callback URL to: \", HTML.SPAN({\n    \"class\": \"url\"                                                                                                     // 6\n  }, Blaze.View(function() {                                                                                           // 7\n    return Spacebars.mustache(view.lookup(\"siteUrl\"));                                                                 // 8\n  })), \"\\n        \"), \"\\n    \") ];                                                                                     // 9\n}));                                                                                                                   // 10\n                                                                                                                       // 11\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                     // 121\n}).call(this);                                                       // 122\n                                                                     // 123\n                                                                     // 124\n                                                                     // 125\n                                                                     // 126\n                                                                     // 127\n                                                                     // 128\n(function () {                                                       // 129\n                                                                     // 130\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt:accounts-vk/lib/vk_configure.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nTemplate.configureLoginServiceDialogForVk.siteUrl = function () {                                                      // 1\n    return Meteor.absoluteUrl({                                                                                        // 2\n        replaceLocalhost: true                                                                                         // 3\n    });                                                                                                                // 4\n};                                                                                                                     // 5\n                                                                                                                       // 6\nTemplate.configureLoginServiceDialogForVk.fields = function () {                                                       // 7\n    return [                                                                                                           // 8\n        {property: 'appId',  label: 'App Id'},                                                                         // 9\n        {property: 'secret', label: 'App Secret'},                                                                     // 10\n        {property: 'scope', label: 'Scope'}                                                                            // 11\n    ];                                                                                                                 // 12\n};                                                                                                                     // 13\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                     // 151\n}).call(this);                                                       // 152\n                                                                     // 153\n///////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['mrt:accounts-vk'] = {\n  VK: VK\n};\n\n})();\n","servePath":"/packages/mrt_accounts-vk.js","sourceMap":{"version":3,"sources":["/packages/mrt_accounts-vk/packages/mrt_accounts-vk.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2E","file":"/packages/mrt_accounts-vk.js","sourcesContent":["(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt:accounts-vk/lib/accounts_vk.js                                                                         //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nAccounts.oauth.registerService('vk');                                                                                  // 1\n                                                                                                                       // 2\nif (Meteor.isClient) {                                                                                                 // 3\n    Meteor.loginWithVk = function(options, callback) {                                                                 // 4\n        // support a callback without options                                                                          // 5\n        if (! callback && typeof options === \"function\") {                                                             // 6\n            callback = options;                                                                                        // 7\n            options = null;                                                                                            // 8\n        }                                                                                                              // 9\n                                                                                                                       // 10\n        var credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback);             // 11\n        VK.requestCredential(options, credentialRequestCompleteCallback);                                              // 12\n    };                                                                                                                 // 13\n} else {                                                                                                               // 14\n    Accounts.addAutopublishFields({                                                                                    // 15\n        forLoggedInUser: ['services.vk'],                                                                              // 16\n        forOtherUsers: [                                                                                               // 17\n            'services.vk.id',                                                                                          // 18\n            'services.vk.nickname',                                                                                    // 19\n            'services.vk.gender'                                                                                       // 20\n        ]                                                                                                              // 21\n    });                                                                                                                // 22\n}                                                                                                                      // 23\n                                                                                                                       // 24\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt:accounts-vk/lib/vk_client.js                                                                           //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nVK = {};                                                                                                               // 1\n                                                                                                                       // 2\nVK.requestCredential = function (options, credentialRequestCompleteCallback) {                                         // 3\n                                                                                                                       // 4\n    if (!credentialRequestCompleteCallback && typeof options === 'function') {                                         // 5\n        credentialRequestCompleteCallback = options;                                                                   // 6\n        options = {};                                                                                                  // 7\n    }                                                                                                                  // 8\n                                                                                                                       // 9\n    var config = ServiceConfiguration.configurations.findOne({service: 'vk'});                                         // 10\n    if (!config) {                                                                                                     // 11\n        credentialRequestCompleteCallback && credentialRequestCompleteCallback(new ServiceConfiguration.ConfigError(\"Service not configured\"));\n        return;                                                                                                        // 13\n    }                                                                                                                  // 14\n                                                                                                                       // 15\n    var credentialToken = Random.id();                                                                                 // 16\n    var mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent);                 // 17\n    var display = mobile ? 'touch' : 'popup';                                                                          // 18\n    var scope = '';                                                                                                    // 19\n                                                                                                                       // 20\n    if (config.scope) {                                                                                                // 21\n        scope = config.scope;                                                                                          // 22\n        if (options && options.requestPermissions) {                                                                   // 23\n            scope = scope + ',';                                                                                       // 24\n        }                                                                                                              // 25\n    }                                                                                                                  // 26\n                                                                                                                       // 27\n    if (options && options.requestPermissions) {                                                                       // 28\n        scope = scope + options.requestPermissions.join(',');                                                          // 29\n    }                                                                                                                  // 30\n                                                                                                                       // 31\n    var loginUrl =                                                                                                     // 32\n        'https://oauth.vk.com/authorize' +                                                                             // 33\n            '?client_id=' + config.appId +                                                                             // 34\n            '&scope='     + scope +                                                                                    // 35\n            '&redirect_uri=' + Meteor.absoluteUrl('_oauth/vk?close=close', {replaceLocalhost: false}) +                // 36\n            '&response_type=code' +                                                                                    // 37\n            '&display=' + display +                                                                                    // 38\n            '&state=' + credentialToken;                                                                               // 39\n    Oauth.initiateLogin(credentialToken, loginUrl, credentialRequestCompleteCallback);                                 // 40\n};                                                                                                                     // 41\n                                                                                                                       // 42\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt:accounts-vk/lib/template.vk_configure.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n                                                                                                                       // 1\nTemplate.__checkName(\"configureLoginServiceDialogForVk\");                                                              // 2\nTemplate[\"configureLoginServiceDialogForVk\"] = new Template(\"Template.configureLoginServiceDialogForVk\", (function() { // 3\n  var view = this;                                                                                                     // 4\n  return [ HTML.Raw(\"<p>\\n        First, you'll need to register your client on VKontakte. Follow these steps:\\n    </p>\\n    \"), HTML.OL(\"\\n        \", HTML.Raw('<li>\\n            Visit <a href=\"http://vk.com/editapp?act=create\" target=\"_blank\">http://vk.com/editapp?act=create</a>\\n        </li>'), \"\\n        \", HTML.LI(\"\\n            Set Callback URL to: \", HTML.SPAN({\n    \"class\": \"url\"                                                                                                     // 6\n  }, Blaze.View(function() {                                                                                           // 7\n    return Spacebars.mustache(view.lookup(\"siteUrl\"));                                                                 // 8\n  })), \"\\n        \"), \"\\n    \") ];                                                                                     // 9\n}));                                                                                                                   // 10\n                                                                                                                       // 11\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt:accounts-vk/lib/vk_configure.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nTemplate.configureLoginServiceDialogForVk.siteUrl = function () {                                                      // 1\n    return Meteor.absoluteUrl({                                                                                        // 2\n        replaceLocalhost: true                                                                                         // 3\n    });                                                                                                                // 4\n};                                                                                                                     // 5\n                                                                                                                       // 6\nTemplate.configureLoginServiceDialogForVk.fields = function () {                                                       // 7\n    return [                                                                                                           // 8\n        {property: 'appId',  label: 'App Id'},                                                                         // 9\n        {property: 'secret', label: 'App Secret'},                                                                     // 10\n        {property: 'scope', label: 'Scope'}                                                                            // 11\n    ];                                                                                                                 // 12\n};                                                                                                                     // 13\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n"]}}]